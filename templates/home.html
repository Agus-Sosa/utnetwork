<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="{{url_for('static',filename='images/logo.ico')}}" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static',filename='css/home.css')}}">

    <title>Inicio | UTNetwork</title>
</head>
<body id="body">

    {% set user = usuario %}
    {% include 'components/header.html' %}

    <div class="container_main">
        <aside class="left">
            <div class="left_profile_div" >
                <picture>
                    <img src="{{usuario['avatar']}}" alt="">
                </picture>
                <div>
                    <p>{{usuario['nombre']}}</p>
                    <p>{{usuario['mail']}}</p>
                    
                </div>

            </div>
            <nav class="left_profile_nav">
                    <a href="">
                        Facu Amigos
                    </a>
                    <a href="">
                        Mensajes
                    </a>
                    <a href="">
                        Configuracion
                    </a>
                    <a href="{{url_for('logout')}}">
                        Cerrar Sesion
                    </a>
            </nav>
        </aside>
        <main>
            <div class="container_publish">
                <div>
                    <picture>
                        <img src="{{usuario['avatar']}}" alt="">
                    </picture>
                    <form action="{{url_for('publicar')}}" method="POST">
                    <textarea id="input_publish" name='input_publish' type="text" placeholder="{{usuario['nombre']}}, {{pregunta}}"></textarea>
                </div>
                <button  type="submit">Publicar</button>
                </form>
            </div>
            <div>
            {% for publicacion in publicaciones %}
                <div class="publish_card">
                    <div class="container_profile">

                    <div class="container_info_profile">
                        
                        <picture>
                            <img src="{{ publicacion['avatar'] }}" alt="">
                        </picture>
                        <div class="container_info_profile_text">
                            <p>{{publicacion['nombre']}}</p>
                            <p>{{publicacion['fecha']}}</p>
                            <input name="id_publi"id="id_publi" style="display: none;" value="{{publicacion['id_publicacion']}}">

                        </div>
                    </div>

                        <div class="container_info_profile_buttons" style="display: flex;">
                             {% if publicacion['id_user'] == usuario['id'] %}
                            <form method="POST" action="{{ url_for('eliminar_publi') }}" >
                                <input type="hidden" name="id_publi" value="{{ publicacion['id_publicacion'] }}">
                                <button type="submit"><i class="fa-solid fa-xmark"></i></button>
                            </form>

                            <button style="margin-left: 10px; font-size: medium;" onclick="activateUpdate(this)"><i class="fa-solid fa-pen-to-square"></i></button>

                        {% endif %}
                        </div>
                        </div>

                    <div class="container_text">

                        <form action="{{url_for('actualizar_publi')}}" method="POST">
                        <input type="hidden" name="id_publi" value="{{ publicacion['id_publicacion'] }}">

                        <div class="view_publication" >
                            <p class="text">{{ publicacion['contenido'] }}</p>
                        </div>
                            
                        <div class="edit_publication" style="display: none;">
                            <textarea name="contenido" id="contenido">{{ publicacion['contenido'] }}</textarea>
                            <button type="submit"> Guardar</button>
                            <button onclick="cancelUpdate(this)">Cancelar</button>

                        </div>
                        </form>
                    </div>
                   
                </div>
            {% endfor %}
                <a href="{{ url_for('home', page=page + 1) }}">Cargar m√°s</a>
            </div>
        </main>
        <aside class="right">
            
            {% if usuarios_sugeridos %}

            <div class="container_sugged_persons">
                

            {% for usuarios_sugerido in usuarios_sugeridos %}

                <form action="{{url_for('seguir')}}"  method="POST">

                    <div class="card_sugged_person">
                        <div class="container_sugged_person_info">
                            <picture class="container_sugged_person_picture">
                                <img src="{{usuarios_sugerido['avatar']}}" alt="">
                            </picture>
                                <div class="container_sugged_person_text">
                                    <p>{{usuarios_sugerido['nombre']}}</p>
                                    <input name="id_seguido"id="id_seguido" style="display: none;" value="{{usuarios_sugerido['id']}}">
                                </div>
                        </div>
                        <button class="btn_follow"><i class="fa-solid fa-plus"></i></button>
                    </div>

                </form>

                <!-- </div> -->
                {%endfor%}
        </div>
                {% endif %}

        </aside>
    </div>
<script src="{{url_for('static',filename='js/modo-luz.js')}}"></script>
<script>

</script>
<script src="{{url_for('static',filename='js/publicacion.js')}}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

</body>
</html>